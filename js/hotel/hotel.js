// ===== 카테고리별 데이터 (색상 테마 기반) =====

// 문화 (gold, beige, brown) - 역사/전통 명소
const cultureData = [
  // gold 색상 (선셋 골드)
  {
    id: 101,
    detailId: 101,
    name: "아산 곡교천",
    address: "충청남도 아산시 염치읍 백암리",
    contact: "041-540-2114",
    image: "images/color/gold_1.jpg",
    category: "culture"
  },
  {
    id: 102,
    detailId: 102,
    name: "태안 꽃지해수욕장",
    address: "충청남도 태안군 안면읍 꽃지해안로",
    contact: "041-670-2114",
    image: "images/color/gold_2.jpg",
    category: "culture"
  },
  {
    id: 103,
    detailId: 103,
    name: "순천만 습지",
    address: "전라남도 순천시 순천만길 513-25",
    contact: "061-749-6052",
    image: "images/color/gold_3.jpg",
    category: "culture"
  },
  {
    id: 104,
    detailId: 104,
    name: "제주 성산일출봉",
    address: "제주특별자치도 서귀포시 성산읍 성산리",
    contact: "064-783-0959",
    image: "images/color/gold_4.jpg",
    category: "culture"
  },
  {
    id: 105,
    detailId: 105,
    name: "영주 부석사",
    address: "경상북도 영주시 부석면 부석사로 345",
    contact: "054-633-3464",
    image: "images/color/gold_5.jpg",
    category: "culture"
  },
  // beige 색상 (어스 베이지)
  {
    id: 106,
    detailId: 106,
    name: "안동 하회마을",
    address: "경상북도 안동시 풍천면 하회종가길",
    contact: "054-852-3588",
    image: "images/color/beige_1.jpg",
    category: "culture"
  },
  {
    id: 107,
    detailId: 107,
    name: "수원 화성",
    address: "경기도 수원시 팔달구 정조로 825",
    contact: "031-290-3600",
    image: "images/color/beige_2.jpg",
    category: "culture"
  },
  {
    id: 108,
    detailId: 108,
    name: "경주 대릉원",
    address: "경상북도 경주시 황남동 183",
    contact: "054-750-8650",
    image: "images/color/beige_3.jpg",
    category: "culture"
  },
  {
    id: 109,
    detailId: 109,
    name: "순천 낙안읍성",
    address: "전라남도 순천시 낙안면 충민길 30",
    contact: "061-749-8831",
    image: "images/color/beige_4.jpg",
    category: "culture"
  },
  {
    id: 110,
    detailId: 110,
    name: "서천 신성리 갈대밭",
    address: "충청남도 서천군 한산면 신성리",
    contact: "041-950-4114",
    image: "images/color/beige_5.jpg",
    category: "culture"
  },
  // brown 색상 (테라코타 브라운)
  {
    id: 111,
    detailId: 111,
    name: "대전 계족산 황토길",
    address: "대전광역시 대덕구 장동 산 29-1",
    contact: "042-608-6551",
    image: "images/color/brown_1.jpg",
    category: "culture"
  },
  {
    id: 112,
    detailId: 112,
    name: "무안 황토 갯벌랜드",
    address: "전라남도 무안군 해제면 만송로 36-11",
    contact: "061-450-5114",
    image: "images/color/brown_2.jpg",
    category: "culture"
  },
  {
    id: 113,
    detailId: 113,
    name: "고창 고창읍성",
    address: "전라북도 고창군 고창읍 읍내리",
    contact: "063-560-2714",
    image: "images/color/brown_3.jpg",
    category: "culture"
  },
  {
    id: 114,
    detailId: 114,
    name: "하동 최참판댁",
    address: "경상남도 하동군 악양면 평사리길 66-7",
    contact: "055-880-2950",
    image: "images/color/brown_4.jpg",
    category: "culture"
  },
  {
    id: 115,
    detailId: 115,
    name: "영주 무섬마을",
    address: "경상북도 영주시 문수면 수도리",
    contact: "054-638-7930",
    image: "images/color/brown_5.jpg",
    category: "culture"
  }
];

// 식당 (red, neon, yellow) - 활기/먹거리/야경 명소
const restaurantData = [
  // red 색상 (파이어리 레드)
  {
    id: 201,
    detailId: 201,
    name: "정읍 내장산",
    address: "전라북도 정읍시 내장산로 936",
    contact: "063-538-7875",
    image: "images/color/red_1.jpg",
    category: "restaurant"
  },
  {
    id: 202,
    detailId: 202,
    name: "영광 불갑사",
    address: "전라남도 영광군 불갑면 불갑사로 450",
    contact: "061-350-5600",
    image: "images/color/red_2.jpg",
    category: "restaurant"
  },
  {
    id: 203,
    detailId: 203,
    name: "창덕궁 후원",
    address: "서울특별시 종로구 율곡로 99",
    contact: "02-3668-2300",
    image: "images/color/red_3.jpg",
    category: "restaurant"
  },
  {
    id: 204,
    detailId: 204,
    name: "고창 선운사",
    address: "전라북도 고창군 아산면 선운사로 250",
    contact: "063-561-1422",
    image: "images/color/red_4.jpg",
    category: "restaurant"
  },
  {
    id: 205,
    detailId: 205,
    name: "단양강 잔도",
    address: "충청북도 단양군 적성면 애곡리",
    contact: "043-420-2114",
    image: "images/color/red_5.jpg",
    category: "restaurant"
  },
  // neon 색상 (일렉트릭 네온)
  {
    id: 206,
    detailId: 206,
    name: "DDP (동대문디자인플라자)",
    address: "서울특별시 중구 을지로 281",
    contact: "02-2153-0000",
    image: "images/color/neon_1.jpg",
    category: "restaurant"
  },
  {
    id: 207,
    detailId: 207,
    name: "부산 더베이 101",
    address: "부산광역시 해운대구 동백로 52",
    contact: "051-726-8888",
    image: "images/color/neon_2.jpg",
    category: "restaurant"
  },
  {
    id: 208,
    detailId: 208,
    name: "대구 이월드 83타워",
    address: "대구광역시 달서구 두류공원로 200",
    contact: "053-620-0001",
    image: "images/color/neon_3.jpg",
    category: "restaurant"
  },
  {
    id: 209,
    detailId: 209,
    name: "경주 동궁과 월지",
    address: "경상북도 경주시 원화로 102",
    contact: "054-750-8655",
    image: "images/color/neon_4.jpg",
    category: "restaurant"
  },
  {
    id: 210,
    detailId: 210,
    name: "여수 낭만포차",
    address: "전라남도 여수시 중앙동 해안가",
    contact: "061-659-1800",
    image: "images/color/neon_5.jpg",
    category: "restaurant"
  },
  // yellow 색상 (선샤인 옐로우)
  {
    id: 211,
    detailId: 211,
    name: "신안 선도",
    address: "전라남도 신안군 지도읍 선도리",
    contact: "061-240-8114",
    image: "images/color/yellow_1.jpg",
    category: "restaurant"
  },
  {
    id: 212,
    detailId: 212,
    name: "구례 산수유마을",
    address: "전라남도 구례군 산동면 좌사리",
    contact: "061-780-2450",
    image: "images/color/yellow_2.jpg",
    category: "restaurant"
  },
  {
    id: 213,
    detailId: 213,
    name: "장성 황룡강",
    address: "전라남도 장성군 황룡면 황룡리",
    contact: "061-390-7224",
    image: "images/color/yellow_3.jpg",
    category: "restaurant"
  },
  {
    id: 214,
    detailId: 214,
    name: "부산 대저 생태공원",
    address: "부산광역시 강서구 대저1동",
    contact: "051-970-3975",
    image: "images/color/yellow_4.jpg",
    category: "restaurant"
  },
  {
    id: 215,
    detailId: 215,
    name: "이천 산수유 마을",
    address: "경기도 이천시 백사면 도립리",
    contact: "031-644-2114",
    image: "images/color/yellow_5.jpg",
    category: "restaurant"
  }
];

// 자연 (forest, sky, mint, white, fog, black) - 자연경관
const natureData = [
  // forest 색상 (딥 포레스트 그린)
  {
    id: 301,
    detailId: 301,
    name: "담양 죽녹원",
    address: "전라남도 담양군 담양읍 죽녹원로 119",
    contact: "061-380-3149",
    image: "images/color/forest_1.jpg",
    category: "nature"
  },
  {
    id: 302,
    detailId: 302,
    name: "보성 대한다원",
    address: "전라남도 보성군 보성읍 녹차로 763-67",
    contact: "061-852-4540",
    image: "images/color/forest_2.jpg",
    category: "nature"
  },
  {
    id: 303,
    detailId: 303,
    name: "삼척 도계 이끼폭포",
    address: "강원도 삼척시 도계읍 무건리",
    contact: "033-570-3545",
    image: "images/color/forest_3.jpg",
    category: "nature"
  },
  {
    id: 304,
    detailId: 304,
    name: "제주 비자림",
    address: "제주특별자치도 제주시 구좌읍 비자숲길 55",
    contact: "064-710-7912",
    image: "images/color/forest_4.jpg",
    category: "nature"
  },
  {
    id: 305,
    detailId: 305,
    name: "울산 태화강 십리대숲",
    address: "울산광역시 중구 태화동",
    contact: "052-229-6142",
    image: "images/color/forest_5.jpg",
    category: "nature"
  },
  // sky 색상 (클리어 스카이)
  {
    id: 306,
    detailId: 306,
    name: "포항 스페이스워크",
    address: "경상북도 포항시 북구 환호공원길 30",
    contact: "054-270-5855",
    image: "images/color/sky_1.jpg",
    category: "nature"
  },
  {
    id: 307,
    detailId: 307,
    name: "부산 블루라인파크",
    address: "부산광역시 해운대구 청사포로 116",
    contact: "051-701-5548",
    image: "images/color/sky_2.jpg",
    category: "nature"
  },
  {
    id: 308,
    detailId: 308,
    name: "강릉 안목해변",
    address: "강원도 강릉시 창해로14번길",
    contact: "033-640-5420",
    image: "images/color/sky_3.jpg",
    category: "nature"
  },
  {
    id: 309,
    detailId: 309,
    name: "영덕 블루로드",
    address: "경상북도 영덕군 강구면 강구항로",
    contact: "054-730-6114",
    image: "images/color/sky_4.jpg",
    category: "nature"
  },
  {
    id: 310,
    detailId: 310,
    name: "제주 협재해수욕장",
    address: "제주특별자치도 제주시 한림읍 협재리",
    contact: "064-728-3981",
    image: "images/color/sky_5.jpg",
    category: "nature"
  },
  // mint 색상 (에메랄드 민트)
  {
    id: 311,
    detailId: 311,
    name: "삼척 장호항",
    address: "강원도 삼척시 근덕면 장호리",
    contact: "033-570-3843",
    image: "images/color/mint_1.jpg",
    category: "nature"
  },
  {
    id: 312,
    detailId: 312,
    name: "제주 월정리",
    address: "제주특별자치도 제주시 구좌읍 월정리",
    contact: "064-728-7973",
    image: "images/color/mint_2.jpg",
    category: "nature"
  },
  {
    id: 313,
    detailId: 313,
    name: "남해 상주 은모래비치",
    address: "경상남도 남해군 상주면 상주리",
    contact: "055-860-8631",
    image: "images/color/mint_3.jpg",
    category: "nature"
  },
  {
    id: 314,
    detailId: 314,
    name: "울진 죽변 하트해변",
    address: "경상북도 울진군 죽변면 죽변리",
    contact: "054-789-6903",
    image: "images/color/mint_4.jpg",
    category: "nature"
  },
  {
    id: 315,
    detailId: 315,
    name: "원주 소금산",
    address: "강원도 원주시 지정면 소금산길 12",
    contact: "033-766-3399",
    image: "images/color/mint_5.jpg",
    category: "nature"
  },
  // white 색상 (퓨어 화이트)
  {
    id: 316,
    detailId: 316,
    name: "인제 자작나무 숲",
    address: "강원도 인제군 인제읍 원대리",
    contact: "033-460-8036",
    image: "images/color/white_1.jpg",
    category: "nature"
  },
  {
    id: 317,
    detailId: 317,
    name: "무주 덕유산",
    address: "전라북도 무주군 설천면 삼공리",
    contact: "063-322-3174",
    image: "images/color/white_2.jpg",
    category: "nature"
  },
  {
    id: 318,
    detailId: 318,
    name: "대관령 양떼목장",
    address: "강원도 평창군 대관령면 대관령마루길 483-32",
    contact: "033-335-1966",
    image: "images/color/white_3.jpg",
    category: "nature"
  },
  {
    id: 319,
    detailId: 319,
    name: "청송 얼음골",
    address: "경상북도 청송군 주왕산면 주왕산로",
    contact: "054-873-0014",
    image: "images/color/white_4.jpg",
    category: "nature"
  },
  {
    id: 320,
    detailId: 320,
    name: "이호테우 해변",
    address: "제주특별자치도 제주시 이호일동",
    contact: "064-728-3984",
    image: "images/color/white_5.jpg",
    category: "nature"
  },
  // fog 색상 (미스틱 포그)
  {
    id: 321,
    detailId: 321,
    name: "춘천 소양강 스카이워크",
    address: "강원도 춘천시 영서로 2663",
    contact: "033-240-1695",
    image: "images/color/fog_1.jpg",
    category: "nature"
  },
  {
    id: 322,
    detailId: 322,
    name: "양평 두물머리",
    address: "경기도 양평군 양서면 양수리",
    contact: "031-770-1001",
    image: "images/color/fog_2.jpg",
    category: "nature"
  },
  {
    id: 323,
    detailId: 323,
    name: "옥천 용암사",
    address: "충청북도 옥천군 옥천읍 용암리",
    contact: "043-730-3561",
    image: "images/color/fog_3.jpg",
    category: "nature"
  },
  {
    id: 324,
    detailId: 324,
    name: "청송 주산지",
    address: "경상북도 청송군 주왕산면 주산지리",
    contact: "054-870-6114",
    image: "images/color/fog_4.jpg",
    category: "nature"
  },
  {
    id: 325,
    detailId: 325,
    name: "화순 세량지",
    address: "전라남도 화순군 화순읍 세량리",
    contact: "061-379-3502",
    image: "images/color/fog_5.jpg",
    category: "nature"
  },
  // black 색상 (볼케이노 블랙)
  {
    id: 326,
    detailId: 326,
    name: "제주 주상절리대",
    address: "제주특별자치도 서귀포시 중문동",
    contact: "064-738-1521",
    image: "images/color/black_1.jpg",
    category: "nature"
  },
  {
    id: 327,
    detailId: 327,
    name: "철원 한탄강",
    address: "강원도 철원군 동송읍 장흥리",
    contact: "033-450-5558",
    image: "images/color/black_2.jpg",
    category: "nature"
  },
  {
    id: 328,
    detailId: 328,
    name: "제주 돌문화공원",
    address: "제주특별자치도 제주시 조천읍 남조로 2023",
    contact: "064-710-7731",
    image: "images/color/black_3.jpg",
    category: "nature"
  },
  {
    id: 329,
    detailId: 329,
    name: "울릉도 해안산책로",
    address: "경상북도 울릉군 울릉읍 도동리",
    contact: "054-790-6114",
    image: "images/color/black_4.jpg",
    category: "nature"
  },
  {
    id: 330,
    detailId: 330,
    name: "우도 검멀레 해변",
    address: "제주특별자치도 제주시 우도면 연평리",
    contact: "064-728-4353",
    image: "images/color/black_5.jpg",
    category: "nature"
  }
];

// 레져 (rainbow, pink, lilac) - 체험/테마/꽃축제
const leisureData = [
  // rainbow 색상 (비비드 레인보우)
  {
    id: 401,
    detailId: 401,
    name: "제주 도두동 무지개도로",
    address: "제주특별자치도 제주시 도두동",
    contact: "064-728-2114",
    image: "images/color/rainbow_1.jpg",
    category: "leisure"
  },
  {
    id: 402,
    detailId: 402,
    name: "부산 장림포구",
    address: "부산광역시 사하구 장림동",
    contact: "051-220-4000",
    image: "images/color/rainbow_2.jpg",
    category: "leisure"
  },
  {
    id: 403,
    detailId: 403,
    name: "사천 무지개 해안도로",
    address: "경상남도 사천시 삼천포대교로",
    contact: "055-831-2114",
    image: "images/color/rainbow_3.jpg",
    category: "leisure"
  },
  {
    id: 404,
    detailId: 404,
    name: "인천 송월동 동화마을",
    address: "인천광역시 중구 송월동3가",
    contact: "032-760-6484",
    image: "images/color/rainbow_4.jpg",
    category: "leisure"
  },
  {
    id: 405,
    detailId: 405,
    name: "가평 쁘띠프랑스",
    address: "경기도 가평군 청평면 호반로 1063",
    contact: "031-584-8200",
    image: "images/color/rainbow_5.jpg",
    category: "leisure"
  },
  // pink 색상 (로맨틱 핑크)
  {
    id: 406,
    detailId: 406,
    name: "합천 황매산",
    address: "경상남도 합천군 가회면 황매산로",
    contact: "055-930-3756",
    image: "images/color/pink_1.jpg",
    category: "leisure"
  },
  {
    id: 407,
    detailId: 407,
    name: "제주 휴애리",
    address: "제주특별자치도 서귀포시 남원읍 신례동로 256",
    contact: "064-732-2114",
    image: "images/color/pink_2.jpg",
    category: "leisure"
  },
  {
    id: 408,
    detailId: 408,
    name: "경주 보문단지",
    address: "경상북도 경주시 보문로 446-48",
    contact: "054-745-7601",
    image: "images/color/pink_3.jpg",
    category: "leisure"
  },
  {
    id: 409,
    detailId: 409,
    name: "양주 나리공원",
    address: "경기도 양주시 광적면 효촌리",
    contact: "031-8082-4545",
    image: "images/color/pink_4.jpg",
    category: "leisure"
  },
  {
    id: 410,
    detailId: 410,
    name: "강진 백련사",
    address: "전라남도 강진군 도암면 백련사길 145",
    contact: "061-432-0837",
    image: "images/color/pink_5.jpg",
    category: "leisure"
  },
  // lilac 색상 (라일락 퍼플)
  {
    id: 411,
    detailId: 411,
    name: "신안 퍼플섬",
    address: "전라남도 신안군 안좌면 반월도",
    contact: "061-240-8114",
    image: "images/color/lilac_1.jpg",
    category: "leisure"
  },
  {
    id: 412,
    detailId: 412,
    name: "고성 하늬라벤더팜",
    address: "강원도 고성군 간성읍 흘리리",
    contact: "033-681-0005",
    image: "images/color/lilac_2.jpg",
    category: "leisure"
  },
  {
    id: 413,
    detailId: 413,
    name: "성주 성밖숲",
    address: "경상북도 성주군 성주읍 경산리",
    contact: "054-930-8371",
    image: "images/color/lilac_3.jpg",
    category: "leisure"
  },
  {
    id: 414,
    detailId: 414,
    name: "태안 팜카밀레",
    address: "충청남도 태안군 남면 연꽃길 178",
    contact: "041-675-3636",
    image: "images/color/lilac_4.jpg",
    category: "leisure"
  },
  {
    id: 415,
    detailId: 415,
    name: "정읍 구절초 지방정원",
    address: "전라북도 정읍시 산내면 매죽리",
    contact: "063-539-5696",
    image: "images/color/lilac_5.jpg",
    category: "leisure"
  }
];

// 쇼핑 (indigo, silver, gray) - 마을/도시/전망대
const shoppingData = [
  // indigo 색상 (인디고 블루)
  {
    id: 501,
    detailId: 501,
    name: "울릉도 해안",
    address: "경상북도 울릉군 울릉읍 도동리",
    contact: "054-790-6114",
    image: "images/color/indigo_1.jpg",
    category: "shopping"
  },
  {
    id: 502,
    detailId: 502,
    name: "나주 천연염색 박물관",
    address: "전라남도 나주시 다시면 백호로 379",
    contact: "061-335-0071",
    image: "images/color/indigo_2.jpg",
    category: "shopping"
  },
  {
    id: 503,
    detailId: 503,
    name: "영양 반딧불이 공원",
    address: "경상북도 영양군 수비면 수하리",
    contact: "054-680-5332",
    image: "images/color/indigo_3.jpg",
    category: "shopping"
  },
  {
    id: 504,
    detailId: 504,
    name: "동해 추암 촛대바위",
    address: "강원도 동해시 추암동",
    contact: "033-530-2801",
    image: "images/color/indigo_4.jpg",
    category: "shopping"
  },
  {
    id: 505,
    detailId: 505,
    name: "부산 광안대교",
    address: "부산광역시 수영구 광안해변로",
    contact: "051-610-4742",
    image: "images/color/indigo_5.jpg",
    category: "shopping"
  },
  // silver 색상 (실버리 쉬머)
  {
    id: 506,
    detailId: 506,
    name: "정선 민둥산",
    address: "강원도 정선군 남면 민둥산로",
    contact: "033-560-2114",
    image: "images/color/silver_1.jpg",
    category: "shopping"
  },
  {
    id: 507,
    detailId: 507,
    name: "서울 하늘공원",
    address: "서울특별시 마포구 하늘공원로 95",
    contact: "02-300-5500",
    image: "images/color/silver_2.jpg",
    category: "shopping"
  },
  {
    id: 508,
    detailId: 508,
    name: "울산 간월재",
    address: "울산광역시 울주군 상북면 등억리",
    contact: "052-229-7631",
    image: "images/color/silver_3.jpg",
    category: "shopping"
  },
  {
    id: 509,
    detailId: 509,
    name: "제주 새별오름",
    address: "제주특별자치도 제주시 애월읍 봉성리",
    contact: "064-728-2114",
    image: "images/color/silver_4.jpg",
    category: "shopping"
  },
  {
    id: 510,
    detailId: 510,
    name: "포천 명성산",
    address: "경기도 포천시 영북면 산정리",
    contact: "031-538-2114",
    image: "images/color/silver_5.jpg",
    category: "shopping"
  },
  // gray 색상 (앤티크 그레이)
  {
    id: 511,
    detailId: 511,
    name: "원주 뮤지엄 산",
    address: "강원도 원주시 지정면 오크밸리2길 260",
    contact: "033-730-9000",
    image: "images/color/gray_1.jpg",
    category: "shopping"
  },
  {
    id: 512,
    detailId: 512,
    name: "설악산 울산바위",
    address: "강원도 속초시 설악산로 833",
    contact: "033-636-7700",
    image: "images/color/gray_2.jpg",
    category: "shopping"
  },
  {
    id: 513,
    detailId: 513,
    name: "익산 미륵사지",
    address: "전라북도 익산시 금마면 미륵사지로 362",
    contact: "063-290-6799",
    image: "images/color/gray_3.jpg",
    category: "shopping"
  },
  {
    id: 514,
    detailId: 514,
    name: "낙산공원 성곽길",
    address: "서울특별시 종로구 낙산길 41",
    contact: "02-743-7985",
    image: "images/color/gray_4.jpg",
    category: "shopping"
  },
  {
    id: 515,
    detailId: 515,
    name: "강화 고인돌",
    address: "인천광역시 강화군 하점면 부근리",
    contact: "032-930-7070",
    image: "images/color/gray_5.jpg",
    category: "shopping"
  }
];

// 전체 데이터 통합
const allData = {
  culture: cultureData,
  restaurant: restaurantData,
  nature: natureData,
  leisure: leisureData,
  shopping: shoppingData
};

// 지역명 매핑
const regionNames = {
  seoul: "서울",
  busan: "부산",
  jeju: "제주",
  gangneung: "강릉",
  gyeongju: "경주",
  yeosu: "여수",
  jeonju: "전주",
  sokcho: "속초",
  incheon: "인천",
  daejeon: "대전"
};

// ===== DOM 요소 =====
const spotList = document.getElementById("spotList");
const noResults = document.getElementById("noResults");
const categoryTabs = document.querySelectorAll(".category-tab");
const pagination = document.getElementById("pagination");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const pageInfo = document.getElementById("pageInfo");

// ===== 상태 관리 =====
let currentCategory = "culture";
let currentPage = 1;
const itemsPerPage = 8;

// ===== 카드 렌더링 =====
function renderSpots() {
  const data = allData[currentCategory] || [];
  const totalPages = Math.ceil(data.length / itemsPerPage);

  // 페이지 범위 조정
  if (currentPage > totalPages) currentPage = totalPages || 1;
  if (currentPage < 1) currentPage = 1;

  const startIndex = (currentPage - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  const pageData = data.slice(startIndex, endIndex);

  // 결과가 없을 때
  if (pageData.length === 0) {
    spotList.style.display = "none";
    noResults.style.display = "block";
    pagination.style.display = "none";
    return;
  }

  spotList.style.display = "grid";
  noResults.style.display = "none";
  pagination.style.display = "flex";
  spotList.innerHTML = "";

  pageData.forEach((spot, index) => {
    const card = document.createElement("div");
    card.className = "spot-card";
    card.style.animationDelay = `${index * 0.1}s`;
    card.dataset.spotId = spot.id;
    card.dataset.category = spot.category;
    card.dataset.detailId = spot.detailId || spot.id;

    card.innerHTML = `
      <div class="spot-card-image">
        <img src="../../${spot.image}" alt="${spot.name}" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23e0e0e0%22 width=%22200%22 height=%22200%22 rx=%2220%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23999%22 font-family=%22sans-serif%22 font-size=%2214%22%3E관광지%3C/text%3E%3Ctext x=%2250%25%22 y=%2265%25%22 text-anchor=%22middle%22 fill=%22%23999%22 font-family=%22sans-serif%22 font-size=%2214%22%3E이미지%3C/text%3E%3C/svg%3E'">
      </div>
      <div class="spot-card-info">
        <div class="spot-name">${spot.name}</div>
        <div class="spot-address">${spot.address}</div>
        <div class="spot-contact">${spot.contact}</div>
      </div>
      <button class="add-schedule-btn" data-spot-id="${spot.id}" data-category="${spot.category}">
        <span class="add-icon">+</span>
        <span class="add-text">일정에 추가</span>
      </button>
    `;

    spotList.appendChild(card);
  });

  // 페이지네이션 업데이트
  updatePagination(totalPages);
}

// ===== 페이지네이션 업데이트 =====
function updatePagination(totalPages) {
  pageInfo.textContent = `${currentPage} / ${totalPages} 페이지`;
  prevBtn.disabled = currentPage <= 1;
  nextBtn.disabled = currentPage >= totalPages;
}

// ===== 탭 클릭 이벤트 =====
categoryTabs.forEach(tab => {
  tab.addEventListener("click", () => {
    // 활성 탭 변경
    categoryTabs.forEach(t => t.classList.remove("active"));
    tab.classList.add("active");

    // 카테고리 변경 및 페이지 초기화
    currentCategory = tab.dataset.category;
    currentPage = 1;
    renderSpots();
  });
});

// ===== 페이지네이션 이벤트 =====
prevBtn.addEventListener("click", () => {
  if (currentPage > 1) {
    currentPage--;
    renderSpots();
    window.scrollTo({ top: 300, behavior: "smooth" });
  }
});

nextBtn.addEventListener("click", () => {
  const data = allData[currentCategory] || [];
  const totalPages = Math.ceil(data.length / itemsPerPage);
  if (currentPage < totalPages) {
    currentPage++;
    renderSpots();
    window.scrollTo({ top: 300, behavior: "smooth" });
  }
});


// ===== 카드 클릭 이벤트 (상세 페이지 이동) =====
spotList.addEventListener("click", (e) => {
  // 일정 추가 버튼 클릭 시
  const addBtn = e.target.closest(".add-schedule-btn");
  if (addBtn) {
    e.stopPropagation();
    const spotId = parseInt(addBtn.dataset.spotId);
    const category = addBtn.dataset.category;
    const data = allData[category] || [];
    const selectedSpot = data.find(s => s.id === spotId);

    if (selectedSpot) {
      // 관광지 데이터 구조 설정
      const placeData = {
        type: category,
        originalId: selectedSpot.id,
        image: selectedSpot.image,
        location: selectedSpot.address,
        contact: selectedSpot.contact
      };

      // 캘린더 모달 열기
      calendarModal.open(selectedSpot.name, placeData, (scheduleData) => {
        console.log("일정이 추가되었습니다:", scheduleData);
      });
    }
    return;
  }

  // 카드 클릭 시 상세 페이지로 이동
  const card = e.target.closest(".spot-card");
  if (card) {
    const detailId = card.dataset.detailId;
    window.location.href = `../place/place-detail.html?id=${detailId}`;
  }
});

// ===== URL 파라미터 처리 =====
const params = new URLSearchParams(window.location.search);
const categoryParam = params.get("category");
if (categoryParam && allData[categoryParam]) {
  currentCategory = categoryParam;
  categoryTabs.forEach(tab => {
    tab.classList.remove("active");
    if (tab.dataset.category === categoryParam) {
      tab.classList.add("active");
    }
  });
}

// ===== 초기 렌더링 =====
setTimeout(() => {
  renderSpots();
}, 300);
